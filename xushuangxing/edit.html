<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编辑地址</title>
    <link rel="stylesheet" href="./style/public.css">
    <link rel="stylesheet" href="./style/edit.css">
    <script src="./script/rem.js"></script>
</head>

<body>
    <header>
        <svg t="1598252230724" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="2118" width="28" height="28">
            <path
                d="M324.211517 511.805631 787.889594 73.082583c16.19422-16.630365 16.19422-43.974704 0-60.605068-16.19422-16.630365-42.495607-16.630365-58.613976 0L235.750113 479.360302c-8.647031 8.969398-12.344775 20.934917-11.719003 32.445329-0.644735 11.90863 3.071972 23.874149 11.719003 32.824585l493.506542 466.882788c16.118369 16.649327 42.438718 16.649327 58.613976 0 16.19422-17.085471 16.19422-43.974704 0-60.605068L324.211517 511.805631"
                p-id="2119" fill="#8a8a8a"></path>
        </svg>
        <h1>编辑收货地址</h1>
        <div class="mya">
            删除
        </div>
    </header>
    <form action="">
        <div class="container public">
            <div class="content">
                <div class="people">
                    <span>收货人</span>
                    <input type="text" placeholder="请填写收货人姓名" name="info">
                </div>
            </div>
            <div class="content">
                <div class="people">
                    <span>手机号码</span>
                    <input type="text" placeholder="请填写收货人手机号" name="info">
                </div>
            </div>
            <div class="content little">
                <div class="people">
                    <span>所在地区</span>
                    <input type="text" placeholder="省市区县、乡镇等" name="info">
                </div>
                <svg t="1598265807572" class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                    p-id="2118" width="20" height="20">
                    <path d="M325.048 93.511l-60.030 59.435 357.181 359.631-360.184 356.603 59.522 59.93 420.207-416.043z"
                        p-id="2119" fill="#8a8a8a"></path>
                </svg>
            </div>
            <div class="content">
                <div class="people">
                    <span>详细地址</span>
                    <input type="text" placeholder="街道、楼牌号等" name="info">
                </div>
            </div>
        </div>
        <div class="address public">
            <div class="center">
                <span>设为默认地址</span>
                <div class="roll">
                    <div class="radius">
    
                    </div>
                </div>
            </div>
        </div>
        <div class="new public">
            <span>保存收货地址</span>
        </div>
    </form>
    <div class="fixed">
        <div class="top">
            是否保存本次编辑结果
        </div>
        <div class="bottom">
            <div class="left">
                不保存
            </div>
            <div class="right">
                保存
            </div>
        </div>
    </div>
    <div class="fixed">
        <div class="top">
            确定要删除该地址吗？
        </div>
        <div class="bottom">
            <div class="left">
                取消
            </div>
            <div class="right">
                删除
            </div>
        </div>
    </div>
    <div class="black">

    </div>
    <script>
        function Myroll() {
            this.myroll = document.getElementsByClassName("roll")[0];
            this.myradius = this.myroll.firstElementChild;
            this.myheader = document.getElementsByTagName("header")[0];
            this.mysvg = this.myheader.firstElementChild;
            this.myfixed = document.getElementsByClassName("fixed")[0];
            this.notsave = document.getElementsByClassName("left")[0];
            this.myblack = document.getElementsByClassName("black")[0];
            this.mydelete = document.getElementsByClassName("mya")[0];
            this.myfixedTwo = document.getElementsByClassName("fixed")[1];
            this.mysvgTwo = document.getElementsByClassName("left")[1];
            this.mymove();
            this.save();
        }
        Myroll.prototype.mymove = function () {
            var self = this;
            var num = 0;
            this.myroll.onclick = function () {
                if (num % 2 == 0) {
                    self.myradius.style.background = "orange";
                    self.myradius.style.left = "55%"
                    this.style.border = "1px solid orange";
                } else {
                    self.myradius.style.background = "#cacaca";
                    self.myradius.style.left = "3%"
                    this.style.border = "1px solid #cacaca";
                }
                num++;
            }
        }
        Myroll.prototype.save = function () {
            var _this = this;
            this.mysvg.onclick = function () {
                _this.myfixed.style.display = "block";
                _this.myblack.style.display = "block";
            }
            this.notsave.onclick = function () {
                _this.myfixed.style.display = "none";
                _this.myblack.style.display = "none";
                location.href = "./manage.html"
            }
            this.mydelete.onclick = function () {
                _this.myfixedTwo.style.display = "block";
                _this.myblack.style.display = "block";
            }
            this.mysvgTwo.onclick = function () {
                _this.myfixedTwo.style.display = "none";
                _this.myblack.style.display = "none";
            }
        }
        var myroll = new Myroll();

        var myinfo = document.getElementsByName("info");
        var getinfoone = document.getElementsByName("info")[0];
        var getinfotwo = document.getElementsByName("info")[1];
        var getinfothree = document.getElementsByName("info")[2];
        var getinfofour = document.getElementsByName("info")[3];
        var mynew = document.getElementsByClassName("new")[0];
        var myspanuser = JSON.parse(localStorage.getItem('spanuser'));
        var myrightzero = document.getElementsByClassName("right")[0];
        var myright = document.getElementsByClassName("right")[1];
        var myuser = JSON.parse(localStorage.getItem('user'));
        mynew.onclick = function () {
            if (!(getinfoone && getinfotwo && getinfothree && getinfofour).value == "") {
                var obj2 = [
                    getinfoone.value, getinfotwo.value, getinfothree.value, getinfofour.value
                ]
                var json2 = JSON.stringify(obj2)
                localStorage.setItem('edituser', json2)
                if (localStorage.getItem('edituser')) {
                    var edituser = localStorage.getItem('edituser');
                    console.log(JSON.parse(edituser))
                } else {
                    console.error('本地数据不存在')
                }
                console.log(JSON.parse(edituser))
                location.href = "./manage.html";
            } else {
                alert("您必须将信息填写完整")
            }
        }
        myrightzero.onclick = function(){
            if (!(getinfoone && getinfotwo && getinfothree && getinfofour).value == "") {
                var obj2 = [
                    getinfoone.value, getinfotwo.value, getinfothree.value, getinfofour.value
                ]
                var json2 = JSON.stringify(obj2)
                localStorage.setItem('edituser', json2)
                if (localStorage.getItem('edituser')) {
                    var edituser = localStorage.getItem('edituser');
                    console.log(JSON.parse(edituser))
                } else {
                    console.error('本地数据不存在')
                }
                console.log(JSON.parse(edituser))
                location.href = "./manage.html";
            } else {
                alert("您必须将信息填写完整")
            }
        }
        myright.onclick = function(){
            localStorage.removeItem('user')
            localStorage.removeItem('edituser');
            location.href = "./manage.html";
        }
        for (let i = 0; i < myinfo.length; i++) {
            localStorage.valueOf().user ? myinfo[i].value = myuser[i] : "";
            localStorage.valueOf().spanuser ? myinfo[i].value = myspanuser[i] : ""; 
        }        
    </script>
</body>

</html>